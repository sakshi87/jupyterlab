language: python
os:
  - linux
arch: arm64

jobs:
  include:
    ########## DEVELOPER INSTALL ##########

    - &default
      env: DESC="browser test"
      before_install:
        - wget https://nodejs.org/dist/v12.16.1/node-v12.16.1-linux-arm64.tar.gz -O node-12.tar.gz
        - tar -xf node-12.tar.gz
        - export PATH=${pwd}/node-12/bin:$PATH
        - node -v
        - sudo apt-get install -y chromium-browser
        - export CHROME_BIN=/usr/bin/chromium-browser
      install:
        - python -m pip install -e .
        - npm install
        - npm run build
        - pip install --pre jupyterlab
      script: python -m jupyterlab.browser_check
